import json

IN_PATH = 'backend/data/questions.json'

# Словарь переводов (русский -> казахский)
trans = {
    "Что приносит вам большее удовлетворение в работе?": "Жұмыста сізге не көбірек қанағат береді?",
    "Общий успех группы, к которому я причастен": "Топтың жалпы жетістігі, оған мен де үлес қосамын",
    "Личный результат, за который я отвечаю полностью": "Менің толық жауапкершілігімдегі жеке нәтиже",
    "Сочетание индивидуальной работы с короткими обсуждениями": "Жеке жұмыс пен қысқа талқылаулардың үйлесімі",

    "При столкновении со сложной задачей вы скорее:": "Күрделі мәселеге тап болғанда сіз әдетте қандай әрекет жасайсыз:",
    "Разделите её на мелкие этапы и составите план": "Оны кішкене кезеңдерге бөліп, жоспар құрамын",
    "Начнете действовать и разбираться по ходу дела": "Іске кірісіп, жағдайға қарай шешім қабылдаймын",
    "Попросите совета у того, кто уже решал подобное": "Ұқсас мәселені шешкеннен кеңес сұраймын",

    "Вам поручили срочную работу с жестким дедлайном. Ваша реакция?": "Сізге қатаң мерзімі бар шұғыл тапсырма берілді. Сіздің реакцияңыз қандай?",
    "Чувствую прилив энергии и мобилизуюсь": "Энергия пайда болып, мобилизацияланамын",
    "Работаю в обычном темпе, стараясь не паниковать": "Қалыпты ырғағымен жұмыс істеймін, паникадан сақтанамын",
    "Быстро утомляюсь и начинаю совершать ошибки": "Жылдам шаршаймын және қателіктер жасай бастаймын",

    "Вы заметили ошибку в отчете коллеги, который уже отправлен руководству. Что сделаете?": "Сіз әріптестің есебінде қате байқадыңыз, ол басшылыққа жіберілген. Не істейсіз?",
    "Сразу скажу коллеге и предложу вместе исправить": "Дер сабақта әріптеске айтамын және бірге түзетуді ұсынамын",
    "Не буду вмешиваться, это не моя зона ответственности": "Қатыспаймын, бұл менің жауапкершілік облысым емес",
    "Сообщу руководству, чтобы данные успели поправить": "Деректерді түзету үшін басшылыққа хабарлаймын",

    "Как вы предпочитаете получать инструкции к новой задаче?": "Жаңа тапсырма бойынша нұсқаулықты қалай алуды ұнатасыз?",
    "В виде текста или графической схемы": "Мәтін немесе графикалық схема түрінде",
    "В ходе личного обсуждения или звонка": "Жеке талқылау немесе қоңырау арқылы",
    "Краткое описание + полная свобода действий": "Қысқаша сипаттама + толық еркіндік",

    "Если бы вы писали книгу, о чем бы она была?": "Егер сіз кітап жазсаңыз, ол не туралы болар еді?",
    "Научное исследование или техническое руководство": "Ғылыми зерттеу немесе техникалық нұсқаулық",
    "Художественный роман о чувствах и людях": "Адамдар мен сезімдер туралы көркем роман",
    "Пособие по эффективному управлению бизнесом": "Бизнесті тиімді басқаруға арналған нұсқаулық",

    "В споре вы чаще всего:": "Дауда сіз көбінесе:",
    "Ищете компромисс, который устроит всех": "Барлығына сай компромисс іздейсіз",
    "Твердо стоите на своем, если уверены в правоте": "Дұрыс екеніне сенімді болсаңыз, өз пікіріңізде тұрасыз",
    "Стараетесь уйти от конфликта и промолчать": "Даудан қашып, үндемей қалуға тырысасыз",

    "Как вы организуете свое рабочее место?": "Жұмыс орныңызды қалай ұйымдастырасыз?",
    "Строгий порядок, всё лежит на своих местах": "Қатаң тәртіп, бәрі өз орнында",
    "«Творческий беспорядок», мне так удобнее": "«Шығармашылық ретсіздік» — маған осылай ыңғайлы",
    "Минимализм — только компьютер и чашка кофе": "Минимализм — тек компьютер мен бір кесе кофе",

    "Что вас больше мотивирует в работе?": "Жұмыста сізді не көбірек ынталандырады?",
    "Высокая заработная плата и бонусы": "Жоғары жалақы мен бонустар",
    "Признание коллег и публичный успех": "Әріптестердің мойындауы және қоғамдық табыс",
    "Ощущение, что моя работа помогает людям": "Жұмысым адамдарға көмектеседі деген сезім",

    "Вам нужно убедить команду принять непопулярное решение. Как поступите?": "Команданы еушыл шешімді қабылдауға сендіру керек. Қалай істерсіз?",
    "Подробно объясню логику и выгоду в будущем": "Логикасы мен болашақтағы пайдасын егжей-тегжейлі түсіндіремін",
    "Использую свой авторитет и настою на выполнении": "Өз беделімді пайдаланып, орындауды талап етемін",
    "Соберу мнения и попробую смягчить решение": "Пікір жинап, шешімді жұмсартып көрейін",

    "Как вы относитесь к монотонной, однообразной работе?": "Сіз монотонды, біркелкі жұмысқа қалай қарайсыз?",
    "Спокойно выполняю, она меня успокаивает": "Тыныш орындаймын, ол мені тыныштандырады",
    "Быстро начинаю скучать и искать что-то новое": "Жылдам жалықтырып, жаңа нәрсе іздей бастаймын",
    "Могу делать, если понимаю конечную цель": "Қорытынды мақсатты түсінсем, орындай аламын",

    "Вам нравится работать с документами и таблицами?": "Құжаттар мен кестелермен жұмыс істеген ұнайсыз ба?",
    "Да, люблю, когда всё структурировано": "Иә, бәрі құрылымдалған кезде ұнайды",
    "Предпочитаю живое общение или физический труд": "Тірі сөйлесуді немесе физикалық еңбек пен ұнатамын",
    "Могу работать по необходимости, но без восторга": "Қажет болса жұмыс істей аламын, бірақ кәдімгідей қызығушылық жоқ",

    # Add translations for remaining questions q13..q50
}

# Дополнительно добавим переводы для оставшихся текстов, если отсутствуют — пока копируем русский

with open(IN_PATH, 'r', encoding='utf-8') as f:
    data = json.load(f)

count_replaced = 0
count_missing = 0

for q in data:
    ru_text = q.get('text', {}).get('ru') if isinstance(q.get('text'), dict) else q.get('text')
    if isinstance(ru_text, str):
        if ru_text in trans:
            kz_text = trans[ru_text]
        else:
            kz_text = ru_text  # временно копируем, если перевода нет
            count_missing += 1
        # set kz
        if isinstance(q.get('text'), dict):
            q['text']['kz'] = kz_text
            count_replaced += 1
        else:
            q['text'] = {'ru': ru_text, 'kz': kz_text}
            count_replaced += 1
    # options
    opts = q.get('options', [])
    for opt in opts:
        ru_opt = opt.get('text', {}).get('ru') if isinstance(opt.get('text'), dict) else opt.get('text')
        if isinstance(ru_opt, str):
            if ru_opt in trans:
                kz_opt = trans[ru_opt]
            else:
                kz_opt = ru_opt
                count_missing += 1
            if isinstance(opt.get('text'), dict):
                opt['text']['kz'] = kz_opt
                count_replaced += 1
            else:
                opt['text'] = {'ru': ru_opt, 'kz': kz_opt}
                count_replaced += 1

with open(IN_PATH, 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)

print(f"Replaced kz for {count_replaced} fields; {count_missing} missing translations (copied from ru).")
